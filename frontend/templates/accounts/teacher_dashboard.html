<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è - {{ user.last_name }} {{ user.first_name }}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="profile-section">
                <div class="profile-pic-container">
                    <img src="https://via.placeholder.com/150" alt="–§–æ—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è" class="profile-pic" id="profilePic">
                    <input type="file" id="profilePicInput" class="profile-pic-input" accept="image/*">
                </div>
                <div class="profile-name" id="profileName">
                    {{ user.last_name }} {{ user.first_name }}
                    {% if user.teacherprofile.patronymic %}{{ user.teacherprofile.patronymic }}{% endif %}
                </div>
            </div>
            
            <div class="nav-buttons" id="navButtons">
                <a href="#homeworks" class="nav-btn">–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</a>
                <a href="#home" class="nav-btn">–î–æ–º–æ–π</a>
                <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
                <form method="post" action="{% url 'logout' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="nav-btn" style="background: var(--beige-dark);">–í—ã–π—Ç–∏</button>
                </form>
            </div>
            
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <main>
        <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–µ–∫—Ü–∏—è -->
        <section class="welcome-section" style="background: linear-gradient(135deg, var(--olive-dark) 0%, var(--muted-green) 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; text-align: center;">
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è!</h2>
            <p style="margin-top: 10px; opacity: 0.9;">{{ user.last_name }} {{ user.first_name }}{% if user.teacherprofile.patronymic %} {{ user.teacherprofile.patronymic }}{% endif %}</p>
        </section>

        <section id="home" class="section">
            <h2 class="my-course">–ú–æ–∏ –∫—É—Ä—Å—ã</h2>
            <div class="course-buttons">
                <button class="course-btn active-course">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                <button class="course-btn indev-course">–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</button>
                <button class="course-btn archive-course">–í –∞—Ä—Ö–∏–≤–µ</button>
            </div>

            <section class="course-panel" id="coursePanel">
                <div id="panelMessage">–£–¥–∞—á–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è, <span id="userName">{{ user.first_name }}</span>!</div>
                    
                <!-- –°—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
                <button class="nav-arrow left" id="prevArrow">‚Äπ</button>
                <button class="nav-arrow right" id="nextArrow">‚Ä∫</button>
                
                <div class="courses-container" id="coursesContainer">
                    <!-- –ë–ª–æ–∫–∏ –∫—É—Ä—Å–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    {% for course in courses %}
                    <div class="course-card">
                        <div class="course-header">{{ course.title }}</div>
                        <div class="course-details">
                            <div class="course-detail">–°—Ç—É–¥–µ–Ω—Ç–æ–≤: {{ course.student_count }}</div>
                            <div class="course-detail">–ó–∞–¥–∞–Ω–∏–π: {{ course.assignment_count }}</div>
                            <div class="course-detail">–°—Ç–∞—Ç—É—Å: {{ course.get_status_display }}</div>
                        </div>
                        <div class="course-notifications">{{ course.pending_submissions }}</div>
                    </div>
                    {% empty %}
                    <div class="no-courses" style="text-align: center; padding: 40px; color: var(--brown-dark);">
                        –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤. <a href="{% url 'create_course' %}" style="color: var(--olive-dark);">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å</a>
                    </div>
                    {% endfor %}
                </div>
            </section>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π -->
        <section id="homeworks" class="section">
            <h2>–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h2>
            
            <div id="search-panel">
                <div class="search-group">
                    <label for="search-name">–§–∞–º–∏–ª–∏—è —É—á–µ–Ω–∏–∫–∞</label>
                    <input type="text" id="search-name" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é">
                </div>
                
                <div class="search-group">
                    <label for="search-deadline">–°—Ä–æ–∫ —Å–¥–∞—á–∏</label>
                    <input type="date" id="search-deadline">
                </div>
                
                <div class="search-group">
                    <label for="search-course">–ö—É—Ä—Å</label>
                    <select id="search-course">
                        <option value="">–í—Å–µ –∫—É—Ä—Å—ã</option>
                        {% for course in courses %}
                        <option value="{{ course.id }}">{{ course.title }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <button id="search-btn">–ù–∞–π—Ç–∏</button>
            </div>

            <section id="results-section">
                <div id="results-table" class="hidden">
                    <!-- –¢–∞–±–ª–∏—Ü–∞ –±—É–¥–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∑–¥–µ—Å—å -->
                    <div class="homework-row homework-row-header">
                        <div>–°—Ç—É–¥–µ–Ω—Ç</div>
                        <div>–ö—É—Ä—Å</div>
                        <div>–ó–∞–¥–∞–Ω–∏–µ</div>
                        <div>–°—Ä–æ–∫ —Å–¥–∞—á–∏</div>
                        <div>–°—Ç–∞—Ç—É—Å</div>
                        <div>–û—Ü–µ–Ω–∫–∞</div>
                        <div>–î–µ–π—Å—Ç–≤–∏—è</div>
                    </div>
                    <!-- –°—Ç—Ä–æ–∫–∏ —Å –∑–∞–¥–∞–Ω–∏—è–º–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>
        </section>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
        <div id="comment-modal" class="modal">
            <div class="modal-content">
                <button class="modal-close">&times;</button>
                <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ä–∞–±–æ—Ç–µ</h3>
                <textarea id="comment-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea>
                <div class="modal-buttons">
                    <button class="modal-btn cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                    <button id="save-comment" class="modal-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –Ω–∞–≥—Ä–∞–¥ -->
        <section class="rewards">
            <div class="rewards-header">
                <h2 class="rewards-title">–ú–æ–∏ –Ω–∞–≥—Ä–∞–¥—ã</h2>
                <div class="rewards-score">
                    üíé –ë–∞–ª–ª—ã: <span id="totalScore">0</span>
                </div>
            </div>
            
            <div class="rewards-grid" id="rewardsGrid">
                <!-- –ù–∞–≥—Ä–∞–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                <div class="reward-card">
                    <div class="reward-icon">üèÜ</div>
                    <div class="reward-name">–ü–µ—Ä–≤—ã–π –∫—É—Ä—Å</div>
                    <div class="reward-description">–°–æ–∑–¥–∞–π—Ç–µ –≤–∞—à –ø–µ—Ä–≤—ã–π –æ–±—É—á–∞—é—â–∏–π –∫—É—Ä—Å</div>
                    <div class="reward-value">+50 –±–∞–ª–ª–æ–≤</div>
                </div>
                
                <div class="reward-card">
                    <div class="reward-icon">‚≠ê</div>
                    <div class="reward-name">–ê–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</div>
                    <div class="reward-description">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ 50 –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π</div>
                    <div class="reward-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 30%"></div>
                        </div>
                        <div class="reward-stats">
                            <span>15/50</span>
                            <span>30%</span>
                        </div>
                    </div>
                    <div class="reward-value">+100 –±–∞–ª–ª–æ–≤</div>
                </div>
            </div>
            
            <div class="rewards-summary">
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-value" id="totalRewards">2</div>
                        <div class="summary-label">–í—Å–µ–≥–æ –Ω–∞–≥—Ä–∞–¥</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="achievedRewards">1</div>
                        <div class="summary-label">–ü–æ–ª—É—á–µ–Ω–æ</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="completionRate">50%</div>
                        <div class="summary-label">–ü—Ä–æ–≥—Ä–µ—Å—Å</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="nextReward">–ê–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</div>
                        <div class="summary-label">–°–ª–µ–¥—É—é—â–∞—è –Ω–∞–≥—Ä–∞–¥–∞</div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer>
        <p>¬© 2025 –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞. –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: {{ user.last_name }} {{ user.first_name }}</p>
    </footer>

    <!-- Django CSRF —Ç–æ–∫–µ–Ω –¥–ª—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤ -->
    <script>
        const CSRF_TOKEN = '{{ csrf_token }}';
        const USER_DATA = {
            id: {{ user.id }},
            firstName: '{{ user.first_name }}',
            lastName: '{{ user.last_name }}',
            email: '{{ user.email }}'
        };
    </script>
    
    <script src="{% static 'js/main.js' %}"></script>
    
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ */
        .welcome-section {
            margin: 20px auto;
            max-width: 1200px;
        }
        
        .no-courses {
            background: var(--light-cream);
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .no-courses a {
            font-weight: bold;
            text-decoration: none;
        }
        
        .no-courses a:hover {
            text-decoration: underline;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞ –≤ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ */
        @media (max-width: 768px) {
            .nav-buttons form {
                width: 100%;
            }
            
            .nav-buttons form .nav-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</body>
</html>